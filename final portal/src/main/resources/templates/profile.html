<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Profile</title>
	<link rel="shortcut icon" type="image/x-icon" th:href="@{/images/orange-hands-ask.png}">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/css/normalize.css}" />
	<link rel="stylesheet" th:href="@{/css/dashboard.css}">
	<link rel="stylesheet" th:href="@{/css/cards.css}">
	<link rel="stylesheet" th:href="@{/css/form.css}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css" integrity="sha512-O03ntXoVqaGUTAeAmvQ2YSzkCvclZEcPQu1eqloPaHfJ5RuNGiS4l+3duaidD801P50J28EHyonCV06CUlTSag==" crossorigin="anonymous" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.js" integrity="sha512-OmBbzhZ6lgh87tQFDVBHtwfi6MS9raGmNvUNTjDIBb/cgv707v9OuBVpsN6tVVTLOehRFns+o14Nd0/If0lE/A==" crossorigin="anonymous"></script>
	<!--===============================================================================================-->
	<script th:src="@{/js/jquery-3.5.1.js}"></script>
	<!--===============================================================================================-->
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
	<style type="text/css">
	</style>
</head>

<body>
	<div class="wrapper">
		<div th:insert="layout/headerAndNav :: logo-header-navbar"></div>
		<div th:insert="layout/headerAndNav :: sidebar"></div>
		<div class="main-panel">
			<div class="content">
				<div class="panel-header bg-primary-gradient">
					<div class="page-inner py-5">
						<div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
							<div>
								<h2 class="text-white pb-2 fw-bold">Profile</h2>
							</div>
						</div>
					</div>
				</div>
				<div class="page-inner mt--5 ">
					<div class="row m--2">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header card-header-warning">
									<h4 class="card-title">Edit Profile</h4>
								</div>
								<div class="card-body">
									<form id="updateForm" th:method="post" th:action="@{/update-profile}" th:object="${user}">
										<div class="row">
											<div class="col-md-5">
												<div class="form-group">
													<label class="bmd-label-floating">Institution name</label>
													<input th:value="${user.institution}" th:field="*{institution}" type="text" class="form-control">
												</div>
											</div>
											<div class="col-md-3">
												<div class="form-group">
													<label class="bmd-label-floating">Username</label> <input th:value="${user.username}" th:field="*{username}" type="text" class="form-control">
												</div>
											</div>
											<div class="col-md-4">
												<div class="form-group">
													<label class="bmd-label-floating">Email address</label> <input th:value="${user.email}" th:field="*{email}" type="email" class="form-control">
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label class="bmd-label-floating">First Name</label> <input th:value="${user.firstName}" th:field="*{firstName}" type="text" class="form-control">
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label class="bmd-label-floating">Last Name</label> <input th:value="${user.lastName}" th:field="*{lastName}" type="text" class="form-control">
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label class="bmd-label-floating">Street</label><input th:value="${user.address != null ? user.address.street : ''}" th:field="*{address.street}" type="text" class="form-control"> </div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-4">
												<div class="form-group">
													<label class="bmd-label-floating">City</label> <input  th:value="${user.address != null ? user.address.city : ''}" th:field="*{address.city}" type="text" class="form-control">
												</div>
											</div>
											<div class="col-md-4">
												<div class="form-group">
													<label class="bmd-label-floating">Country</label> <input th:value="${user.address != null ? user.address.country :''}" th:field="*{address.country}" type="text" class="form-control">
												</div>
											</div>
											<div class="col-md-4">
												<div class="form-group">
													<label class="bmd-label-floating">Postal Code</label> <input th:value="${user.address != null and user.address.postalCode &gt; 1  ? user.address.postalCode : ''}" th:field="*{address.postalCode}" type="number" step="0" class="form-control">
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<label>Password</label> <input type="password" th:field="*{password}" class="form-control">
												</div>
											</div>
										</div>
										<button type="submit" class="btn btn-primary pull-right">Update Profile</button>
										<div class="clearfix"></div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- jQuery UI -->
	<script th:src="@{/js/jquery/jquery-ui.min.js}"></script>
	<script th:src="@{/js/jquery/jquery.ui.touch-punch.min.js}"></script>
	<!-- jQuery Scrollbar -->
	<script th:src="@{/js/jquery/jquery.scrollbar.min.js}"></script>
	<!-- dashboard JS -->
	<script th:src="@{/js/dashboard.js}"></script>
	<script th:inline="javascript">
	var action = /*[[${action}]]*/ '';
	if(action == "updateProfile") {
		iziToast.success({
			title: 'Update Profile',
			message: 'Successfully updated',
			position: 'topRight'
		});
	}
	</script>
</body>

</html>